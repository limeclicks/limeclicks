{% extends "base.html" %}
{% block title %}Create account{% endblock %}

{% block content %}
<div class="max-w-md mx-auto mt-8">
    <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
            <h1 class="card-title text-2xl mb-2">Join LimeClicks</h1>
            <p class="opacity-70 mb-4">Create your account to get started</p>

            {# Non-field errors (e.g., password validation summary) #}
            {% if form.non_field_errors %}
            <div class="alert alert-error mb-4">
                <ul class="list-disc list-inside">
                    {% for err in form.non_field_errors %}<li>{{ err }}</li>{% endfor %}
                </ul>
            </div>
            {% endif %}

            <form method="post" novalidate>
                {% csrf_token %}

                <div class="form-control mb-4">
                    <label class="label pb-1">
                        <span class="label-text">Full Name</span>
                    </label>
                    <input 
                        type="text" 
                        name="name" 
                        maxlength="150" 
                        required
                        value="{{ form.name.value|default_if_none:'' }}" 
                        class="input input-bordered w-full{% if form.name.errors %} input-error{% endif %}"
                        placeholder="Enter your full name"
                        autofocus
                    >
                    {% if form.name.errors %}
                    <div class="text-error text-xs mt-1">
                        Please enter your full name
                    </div>
                    {% endif %}
                </div>

                <div class="form-control mb-4">
                    <label class="label pb-1">
                        <span class="label-text">Email Address</span>
                    </label>
                    <input 
                        type="email" 
                        name="email" 
                        required 
                        value="{{ form.email.value|default_if_none:'' }}"
                        class="input input-bordered w-full{% if form.email.errors %} input-error{% endif %}" 
                        placeholder="Enter your email address" 
                        autocomplete="email"
                    >
                    {% if form.email.errors %}
                    <div class="text-error text-xs mt-1">
                        Please enter a valid email address
                    </div>
                    {% endif %}
                </div>

                <div class="form-control mb-4">
                    <label class="label pb-1">
                        <span class="label-text">Password</span>
                    </label>
                    <input 
                        type="password" 
                        name="password" 
                        required 
                        minlength="8" 
                        class="input input-bordered w-full{% if form.password.errors %} input-error{% endif %}"
                        placeholder="Create a strong password"
                        autocomplete="new-password"
                    >
                    {% if form.password.errors %}
                    <div class="text-error text-xs mt-1">
                        Password must be at least 8 characters long
                    </div>
                    {% endif %}
                </div>

                <div class="form-control mb-4">
                    <label class="label pb-1">
                        <span class="label-text">Confirm Password</span>
                    </label>
                    <input 
                        type="password" 
                        name="password_confirm" 
                        required 
                        minlength="8" 
                        class="input input-bordered w-full{% if form.password_confirm.errors %} input-error{% endif %}"
                        placeholder="Confirm your password"
                        autocomplete="new-password"
                    >
                    {% if form.password_confirm.errors %}
                    <div class="text-error text-xs mt-1">
                        Passwords do not match
                    </div>
                    {% endif %}
                </div>

                <button class="btn btn-primary w-full" type="submit">Create account</button>
            </form>

            <div class="divider">or</div>
            
            <p class="text-sm opacity-70">
                Already have an account?
                <a class="link link-primary" href="{% url 'accounts:login' %}">
                    Sign in here
                </a>
            </p>
        </div>
    </div>
</div>
{% endblock %}